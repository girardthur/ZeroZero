<!doctype html>
<html>
  <head>
    <title>My TODOs</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <!-- HEADER -->
    <header class="navbar-fixed-top navbar-default">
      <div class="col-xs-12">
        <div class="col-xs-4"></div>
        <div data-target="money" class="col-xs-4 text-center bord">1000$</div>
      </div>
      <div class="col-xs-12">
        <div class="col-xs-4"></div>
        <div data-target="incomePS" class="col-xs-4 text-center bord">32 $ per sec</div>
      </div>
      <div class="col-xs-12">
        <div class="col-xs-4"></div>
        <div data-target="incomePC" class="col-xs-4 text-center bord">50 $ per click</div>
      </div>
    </header>

    <!-- PAGE CONTAINER -->
    <section class="page-container">
      <!-- RESTAU PAGE -->
      <div id="restaurantsPage" style="display: none;">
        <script type="text/template" id="restaurants-template">
          <div data-target="restaurants" class="container-fluid">
          <% console.log(restaurants) %>
          <% restaurants.each(function(restaurant) { %>
            <article class="media restaurant-container" data-target-action="infosRestaurant" data-id="<%- restaurant.get('id') %>">
              <div class="media-left">
                <a href="#">
                  <img data-holder-rendered="true" data-toggle="modal" data-target="#myModal<%- restaurant.get('id') %>" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PCEtLQpTb3VyY2UgVVJMOiBob2xkZXIuanMvNjR4NjQKQ3JlYXRlZCB3aXRoIEhvbGRlci5qcyAyLjYuMC4KTGVhcm4gbW9yZSBhdCBodHRwOi8vaG9sZGVyanMuY29tCihjKSAyMDEyLTIwMTUgSXZhbiBNYWxvcGluc2t5IC0gaHR0cDovL2ltc2t5LmNvCi0tPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbI2hvbGRlcl8xNTE2YjFiMGI2YiB0ZXh0IHsgZmlsbDojQUFBQUFBO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgT3BlbiBTYW5zLCBzYW5zLXNlcmlmLCBtb25vc3BhY2U7Zm9udC1zaXplOjEwcHQgfSBdXT48L3N0eWxlPjwvZGVmcz48ZyBpZD0iaG9sZGVyXzE1MTZiMWIwYjZiIj48cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSIxMi41IiB5PSIzNi44Ij42NHg2NDwvdGV4dD48L2c+PC9nPjwvc3ZnPg==" style="width: 64px; height: 64px;" class="media-object" data-src="holder.js/64x64" alt="64x64">
                </a>
              </div>
              <div class="media-body">
                <h4 class="media-heading"><%- restaurant.get('name') %></h4>
                Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin commodo. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus.
              </div>
            </article>
          <% }); %>
          </div>
        </script>
      </div>
      <!-- OPTIONS -->
      <div id="optionsPage" style="display: none;">
        <div style="text-align: center;">
          <h1>Options</h1>
        </div>
      </div>
      <!-- MAIN -->
      <div id="mainPage" style="display: none;">
        <div style="text-align: center;">
          <h1>Main</h1>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="navbar-fixed-bottom navbar-default">
      <button id="btnOptions" type="button" class="col-xs-4 btn btn-default btn-lg">
        <span class="glyphicon glyphicon-cog"></span>
      </button>
      <button id="btnMain" type="button" class="col-xs-4 btn btn-default btn-lg">
        <span class="glyphicon glyphicon-home"></span>
      </button>
      <button id="btnRestaurants" type="button" class="col-xs-4 btn btn-default btn-lg">
        <span class="glyphicon glyphicon-cutlery"></span>
      </button>
    </footer>

    <!-- PRODUCTS POPUP -->
    <div id="popup"></div>
    <script type="text/template" id="modal-template">
      <div id="myModal<%= restaurant.get('id') %>" class="modal fade" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title"><%= restaurant.get('name') %> </h4>
            </div>
            <div class="container modal-body">
               <% restaurant.products.each(function(product) { %>
                  <div class="col-xs-6"> <%= product.get('id') %> </div>
                  <div class="col-xs-6"> <%= product.get('name') %> </div>

                  <div class="col-xs-12"> <%= product.get('description') %> </div>

                  <div class="col-xs-6"> IPS: </div>
                  <div class="col-xs-6"><%= product.get('incomePerSecondBonus') %> </div>

                  <div class="col-xs-6"> IPC: </div>
                  <div class="col-xs-6"><%= product.get('incomePerClickBonus') %> </div>

                  <div class="col-xs-4"></div>
                  <% if ( !product.get('bought') ) { %>
                    <button type="button" class="col-xs-4 btn btn-warning btn-xs"
                        data-id="<%= product.get('id') %>"
                        data-target-action="clickBuyProduct" >
                      <%= product.get('price') %>
                    </button>
                  <% } else { %>
                    <button type="button" class="disabled col-xs-4 btn btn-success btn-xs">
                      <%= product.get('price') %>
                    </button>
                  <% } %>
                  <div class="col-xs-4"></div>

               <% }); %>
            </div>
            <div class="modal-footer">
              IPS: <%= restaurant.getRestaurantIncomePerSecond() %>  / IPC: <%= restaurant.getRestaurantIncomePerClick() %>
            </div>
          </div>
        </div>
      </div>
    </script>

    <!-- SCRIPTS -->
    <script src="js/vendor/jquery.js" defer></script>
    <script src="js/vendor/underscore.js" defer></script>
    <script src="js/vendor/backbone.js" defer></script>
    <script src="css/bootstrap/js/bootstrap.min.js" defer></script>

    <!-- Core -->
    <script src="js/core/page.js" defer></script>
    <!-- Models -->
    <script src="js/models/product-model.js" defer></script>
    <script src="js/models/restaurant-model.js" defer></script>
    <script src="js/models/player-model.js" defer></script>
    <script src="js/models/main-model.js" defer></script>
    <!-- Collections -->
    <script src="js/collections/product-collection.js" defer></script>
    <script src="js/collections/restaurant-collection.js" defer></script>
    <!-- Views -->
    <script src="js/views/header-view.js" defer></script>
    <script src="js/views/app-view.js" defer></script>
    <script src="js/views/footer-view.js" defer></script>
    <script src="js/views/pages/restaurants-page-view.js" defer></script>
    <script src="js/views/pages/options-page-view.js" defer></script>
    <script src="js/views/pages/main-page-view.js" defer></script>

    <script src="js/app.js" defer></script>
  </body>
</html>
